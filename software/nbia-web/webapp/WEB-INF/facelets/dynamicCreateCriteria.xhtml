<!--L
   Copyright SAIC, Ellumen and RSNA (CTP)


   Distributed under the OSI-approved BSD 3-Clause License.
   See http://ncip.github.com/national-biomedical-image-archive/LICENSE.txt for details.
L-->

<ui:composition xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:ice="http://www.icesoft.com/icefaces/component"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:ncia="http://imaging.nci.nih.gov/ncia">
    <!--  ice:form id="iceForm"-->
                        <table width="80%" class="submissionView" align="center">
                            <tr>
                        <td class="formTitleIIII" colspan="3">
                          <h:outputText value="#{msg.search_selectedCriteria}" />
                        </td>
                      </tr>
    
                      <tr>
                            <td width="12%" class="formLabel">
                                <ice:outputLabel for="dslctQcStatus"  value="#{msg.qcTool_qcStatus}" />
                            </td>
                            <td class="formField" colspan="2">
                                <ice:selectManyCheckbox id="dslctQcStatus" value="#{dynamicQcSearchBean.selectedQcStatus}" partialSubmit="false" style="white-space:nowrap; ">
                                <f:selectItems id="slctStatisItms" value="#{dynamicQcSearchBean.qcStatusItems}" />
                                
                                </ice:selectManyCheckbox>
                                <!-- ice:selectManyMenu id="dslctQcStatus" value="#{dynamicQcSearchBean.selectedQcStatus}" partialSubmit="false" style="white-space:nowrap; ">
                                <f:selectItems id="slctStatisItms" value="#{dynamicQcSearchBean.qcStatusItems}" />
                                </ice:selectManyMenu-->
                           </td>
                      </tr>
                                                                 
                      <tr>
                                <td width="12%" class="formLabel">
                                    <ice:outputLabel for="AdditionalFlags" value="#{msg.qctool_additionalFlags}" />
                                    <br />
                                </td>
                                							
                               <td colspan="2" class="formField" >    
								<table>    
                                <tr>
                                  <td>
                                    <b>
                                      <ice:outputLabel for="BatchNum" value="#{msg.qctool_batch}" />
                                    </b>
                                    <ice:selectOneMenu id="BatchNum"
                                                     value="#{dynamicQcSearchBean.selectedQcBatchNum}" 
                                                     style="font-size:1em" partialSubmit="false">
                                     <f:selectItems value="#{dynamicQcSearchBean.qcBatchNums}" />
                                   </ice:selectOneMenu>   
                                  </td>                                                                                                								                                                																
								 <td><p> </p></td>
								 <td><p> </p></td>
								 <td><p> </p></td>
								 <td><p> </p></td>
								 <td><p> </p></td>
								 <td><p> </p></td>								 
                                <td>    
									<b>
                                      <ice:outputLabel for="SubmissionType" value="#{msg.qctool_SubmissionType}" />
                                    </b>								              		     
                                   <ice:selectOneMenu id="SubmissionType"
                                                     value="#{dynamicQcSearchBean.selectedQcSubmissionType}" 
                                                     style="font-size:1em" partialSubmit="false">
                                     <f:selectItems value="#{dynamicQcSearchBean.qcSubmissionTypes}" />
                                   </ice:selectOneMenu>                                                 
                               </td>
								 <td><p> </p></td>
								 <td><p> </p></td>
								 <td><p> </p></td>
								 <td><p> </p></td>
								 <td><p> </p></td>
								 <td><p> </p></td>							   
                               <td> 
								   <b>
                                      <ice:outputLabel for="ReleasedStatus" value="#{msg.qctool_ReleasedStatus}" />
                                   </b>                 		     
                                   <ice:selectOneMenu id="ReleasedStatus"
                                                     value="#{dynamicQcSearchBean.selectedQcReleasedStatus}" 
                                                     style="font-size:1em" partialSubmit="false">
                                     <f:selectItems value="#{dynamicQcSearchBean.qcReleasedStatus}" />
                                   </ice:selectOneMenu>                                                 
                               </td>                              
							</tr>		                        
                            </table>    
						</td>
					  </tr>
                      <tr>
                         <td class="formLabel">
                               #{msg.qctool_sub_date}
                         </td>
                         <td class="formField" >
                                <ice:outputLabel for="dyfromDate"  value="#{msg.date_from}"/> 
                                <ice:selectInputDate id="dyfromDate"
                                                     value="#{dynamicQcSearchBean.fromDate}" 
                                                     popupDateFormat="MM/dd/yyyy"
                                                     renderAsPopup="true"
                                                     partialSubmit="false"
                                                     style="display:inline">
                                  <f:convertDateTime pattern="MM/dd/yyyy"
                                                     timeZone="#{dynamicQcSearchBean.defaultTimeZone}"/>
                                </ice:selectInputDate>                                                 
                         </td>
                         <td class="formField"> 
                                <ice:outputLabel for="dytoDate"  value="#{msg.date_to}" /> 
                                <ice:selectInputDate id="dytoDate"
                                                     value="#{dynamicQcSearchBean.toDate}" 
                                                     popupDateFormat="MM/dd/yyyy"
                                                     renderAsPopup="true"
                                                     partialSubmit="false"
                                                     style="display:inline">
                                  <f:convertDateTime pattern="MM/dd/yyyy"
                                                     timeZone="#{dynamicQcSearchBean.defaultTimeZone}"/>
                                </ice:selectInputDate>
                         </td>                  
                     </tr>             
                      <tr>
                        <td class="formLabel">
                        Additional Criteria
                        </td>
                        <td colspan="2" class="formLabel">
                          <ice:outputLabel id="noCriteria"
                                           value="No criteria selected"
                                           rendered="#{!dynamicQcSearchBean.showCriteria}" />
                          <ice:dataTable value="#{dynamicQcSearchBean.criteria}"
                                         var="item"
                                         rendered="#{dynamicQcSearchBean.showCriteria}"
                                         rowClasses="oddRow, evenRow"
                                         style="margin-top: 0px;"
                                         width="100%"
                                         border="1"
                                         cellpadding="0"
                                         cellspacing="0">
                            <h:column>
                              <f:facet name="header">
                                <ice:outputText value="Element"/>
                              </f:facet>
                              <ice:outputText value="#{item.label}"/>
                            </h:column>
                            <h:column>
                              <f:facet name="header">
                                <ice:outputText value="Operator"/>
                              </f:facet>
                              <center> 
                                <ice:outputText value="#{item.operator.value}"/>
                              </center>
                            </h:column>
                            <h:column>
                              <f:facet name="header">
                                <ice:outputText value="Value"/>
                              </f:facet>
                              <ice:outputText value="#{item.value}"/>
                            </h:column>
                            <h:column>
                              <f:facet name="header">
                                <ice:outputText value="Action"/>
                              </f:facet>
                              <center>
                                <ice:commandButton actionListener="#{dynamicQcSearchBean.removeItem}" 
                                                   image="images/cancel.png"
                                                   title="Remove Criteria" alt="Remove Criteria"/>
                              </center>
                            </h:column>
                          </ice:dataTable>
                        </td>
                      </tr>
                      <tr>
                        <td align="right" colspan="3">
                          <ice:commandButton id="submission"
                                             image="images/submit.gif" alt="submit"
                                             action="#{dynamicQcSearchBean.submitQCSearch}"
                                             onclick="if (!checkCriteriaAndShowProgress(#{dynamicQcSearchBean.criteriaLength})){return false;}"/>
                          <f:verbatim>&amp;nbsp;</f:verbatim>
                          <ice:commandButton image="images/reset.gif" alt="reset"
                                             action="#{dynamicQcSearchBean.resetAction}"/>
                        </td>
                      </tr>
                    </table>
                    <div align="center">
        <table width="80%"  border="0" 
                             class="submissionView"
                             style="margin-top: 20px; margin-left: 0px; margin-right: 0px">
                        <tr>
                          <th>
                           Construct Criteria
                          </th>
                        </tr>   
                        <tr>
                          <td>
                            <!-- ice:form id="groupForm"-->
                              <table class="promptbox" style="display: block;" id="newSampleQuery">    
                                <tr>
                                  <td colspan="4">
                                    <b>
                                      <ice:outputLabel for="group" value="Group"/>
                                    </b>
                                    <ice:selectOneMenu id="group" 
                                                       tabindex="10"
                                                       partialSubmit="true"
                                                       value="#{dynamicQcSearchBean.selectedDataGroup}"
                                                       valueChangeListener="#{dynamicQcSearchBean.dataGroupChanged}">
                                      <f:selectItems value="#{dynamicQcSearchBean.dataGroupItems}"/>                  
                                    </ice:selectOneMenu>   
                                  </td>
                                </tr>
                              </table>
                            <!-- /ice:form-->
                            <!-- ice:form id="fieldForm" -->
                              <table class="promptbox" style="display: block;" id="fieldsTable">   
                                <tr>
                                  <td>
                                  <ice:outputLabel for="fields"  value="select fields" style="display:none"/> 
                                    <ice:selectOneMenu id="fields" 
                                                       tabindex="20"
                                                       partialSubmit="true"
                                                       value="#{dynamicQcSearchBean.selectedField}"
                                                       valueChangeListener="#{dynamicQcSearchBean.fieldItemChanged}">
                                      <f:selectItems value="#{dynamicQcSearchBean.fieldItems}"/>
                                    </ice:selectOneMenu>
                                  </td>
                                  <td>
                                  <ice:outputLabel for="operand"  value="select operand" style="display:none"/> 
                                    <ice:selectOneMenu id="operand"
                                                       tabindex="30"
                                                       partialSubmit="false"
                                                       value="#{dynamicQcSearchBean.selectedOperand}">
                                      <f:selectItems value="#{dynamicQcSearchBean.operandItems}"/>
                                   </ice:selectOneMenu>
                                  </td>
                                  <td>
                                    <!--  originally rendered=#{!dynamicSearchBean.hasPermissibleData} but icefaces doesnt refresh properly -->
                                    <ice:outputLabel for="inputValue" value="inputValue" style="display:none"/> 
                                    <h:inputText id="inputValue"
                                                   tabindex="40"
                                                   style="display: #{dynamicQcSearchBean.hasPermissibleData ? 'none':'inline'}"
                                                   value="#{dynamicQcSearchBean.inputValue}"
                                                   size="55"/>
                                    <ice:selectOneMenu id="permissibleDataValue" 
                                                       tabindex="25"
                                                       partialSubmit="false"
                                                       rendered="#{dynamicQcSearchBean.hasPermissibleData}"
                                                       value="#{dynamicQcSearchBean.permissibleDataValue}">
                                      <f:selectItems value="#{dynamicQcSearchBean.permissibleData}"/>
                                    </ice:selectOneMenu>                               
                                                   
                                  </td>
                                  <td>
                                    <ice:commandButton action="#{dynamicQcSearchBean.addCriteria}"
                                                       image="images/plus_16.png" 
                                                       title="Add Criteria" alt="Add Criteria"/>
                                  </td>
                                </tr>
                                <tr>
                                  <td colspan="4">
                                    <ice:outputLabel id="invalidDate" rendered="#{dynamicQcSearchBean.invalidInteger}"                          
                                                     styleClass="errorLabel" 
                                                     infoClass="infoLabel" value="Please enter valid integer value"/>                     
                                  </td>
                                </tr>
                                <tr>
                                  <td colspan="4">
                                    <ice:outputLabel id="invalidDate" rendered="#{dynamicQcSearchBean.invalidDouble}"                          
                                                     styleClass="errorLabel" 
                                                     infoClass="infoLabel" value="Please enter valid number value"/>                     
                                  </td>
                                </tr>
                                <tr>
                                  <td colspan="4">
                                    <ice:outputLabel id="invalidDate" rendered="#{dynamicQcSearchBean.invalidDate}"                          
                                                     styleClass="errorLabel" 
                                                     infoClass="infoLabel" value="Please enter valid Date (MM/DD/YYYY)"/>                     
                                  </td>
                                </tr>
                                <tr>
                                  <td colspan="4">
                                    <ice:outputLabel id="errorMessages" rendered="#{dynamicQcSearchBean.errorMessage}"                          
                                                     styleClass="errorLabel" 
                                                     infoClass="infoLabel" value="Please enter valid operator or input value"/>                     
                                  </td>
                                </tr>
                                <tr>
                                  <td colspan="4">
                                    <ice:outputLabel id="errorMessage" 
                                                     styleClass="errorLabel"
                                                     rendered="#{dynamicQcSearchBean.hasDuplicate}"
                                                     value="This search criteria has already been entered"/>                     
                                  </td>
                                </tr>          
                              </table>
                            <!-- /ice:form-->
                          </td>
                        </tr>          
                      </table>
                      <!-- ice:form id="contentForm" partialSubmit="true"-->
                        <table border="0" width="80%" class="submissionView">
                          <tr>
                            <td>
                              <ice:selectOneRadio partialSubmit="true" 
                                                  value="#{dynamicQcSearchBean.relation}">
                                <f:selectItem itemLabel="AND" itemValue="AND"/>
                                <f:selectItem itemLabel="OR" itemValue="OR" />
                              </ice:selectOneRadio>
                            </td>
                          </tr>
                        </table>
                        </div>
</ui:composition>                        