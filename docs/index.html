<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>NBIA API - Try It Out</title>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swagger-ui-dist/swagger-ui.css" />
<style>

    html, body {

      margin: 0;

      padding: 0;

      height: 100%;

    }

    #swagger-ui {

      height: 100%;

    }
</style>
</head>
<body>
<div id="swagger-ui"></div>
<script src="https://cdn.jsdelivr.net/npm/swagger-ui-dist/swagger-ui-bundle.js"></script>
<script>

    SwaggerUIBundle({
      url: "nbia-api.yaml",
      dom_id: "#swagger-ui",
      deepLinking: true,
      presets: [
        SwaggerUIBundle.presets.apis,
        SwaggerUIBundle.SwaggerUIStandalonePreset
      ],
      layout: "BaseLayout",
        /* turn syntax highlighting off → no more deep recursion */
      syntaxHighlight: {
        activated: false
      },


       /* ---- response trimming ---- */
    responseInterceptor: res => {
      if (
        res.url.includes("/v4/getSeries") &&                 // target endpoint
        res.headers["content-type"]?.includes("application/json")
      ) {
        try {
          const data = JSON.parse(res.data || res.text);
          if (Array.isArray(data) && data.length > 50) {    // keep first 200
            res.data = JSON.stringify(data.slice(0, 50), null, 2);
            res.text = res.data;
            // option-al: flag the user
            res.headers["x-swagger-ui-note"] =
              `Truncated to 50 of ${data.length} items to avoid UI freeze`;
          }
        } catch (_) {
          /* response wasn’t valid JSON or couldn’t be parsed – ignore */
        }
      }
      return res;
    }

    });
</script>
</body>
</html>

 
